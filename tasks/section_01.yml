---
#
# Copyright 2014 Major Hayden
#
#   Licensed under the Apache License, Version 2.0 (the "License");
#   you may not use this file except in compliance with the License.
#   You may obtain a copy of the License at
#
#       http://www.apache.org/licenses/LICENSE-2.0
#
#   Unless required by applicable law or agreed to in writing, software
#   distributed under the License is distributed on an "AS IS" BASIS,
#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#   See the License for the specific language governing permissions and
#   limitations under the License.
#

  - name: 1.1 Use the Latest OS Release (Not Scored)
    command: cat /etc/release
    changed_when: false
    tags:
      - manual
      - notscored
      - section1.1

  - name: 1.2 Apply Latest OS Patches (Not Scored)
    debug: msg="*** Manually apply latest Critical Patch Update cluster."
    tags:
      - manual
      - notscored
      - section1.2

  - name: 1.3 Install Solaris Encryption Kit (Not Scored)
    copy: >
      src=section_01/sol-10-encrypt-GA-{{ ansible_architecture }}.pkg
      dest=/var/tmp/sol-10-encrypt-GA.pkg
    when: ansible_container != "zone"
    tags:
      - notscored
      - section1.3

  - name: 1.3 Install Solaris Encryption Kit (Not Scored)
    svr4pkg: >
      name={{ item }}
      src=/var/tmp/sol-10-encrypt-GA.pkg
      state=present
    with_items:
      - SUNWcry
      - SUNWcryr
    when: ansible_container != "zone"
    tags:
      - notscored
      - section1.3

  - name: 1.3 Install Solaris Encryption Kit (Not Scored)
    file: >
      path=/var/tmp/sol-10-encrypt-GA.pkg
      state=absent
    when: ansible_container != "zone"
    tags:
      - notscored
      - section1.3
